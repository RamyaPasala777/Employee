"use strict";

sap.ui.define(["sap/ui/core/Component", "./core"], function (Component, ___core) {
  "use strict";

  const isA = ___core["isA"];
  /**
   * Gets app component of a v4 project.
   *
   * @param control - ManagedObject.
   * @returns AppComponent.
   */
  function getAppComponent(control) {
    const ownerComponent = Component.getOwnerComponentFor(control);
    if (ownerComponent?.isA('sap.fe.core.TemplateComponent')) {
      return ownerComponent.getAppComponent();
    }
    return undefined;
  }

  /**
   * Gets reference id of the app.
   *
   * @param control - ManagedObject.
   * @returns string.
   */
  function getReference(control) {
    const manifest = getAppComponent(control)?.getManifest();
    return manifest?.['sap.app']?.id ?? '';
  }

  /**
   * Determines the page type of v4 app.
   *
   * @param control - ManagedObject.
   * @returns 'ObjectPage' | 'ListReport' | undefined.
   */
  function getV4PageType(control) {
    const component = Component.getOwnerComponentFor(control);
    if (!component?.isA('sap.fe.core.TemplateComponent')) {
      return undefined;
    }
    const view = component.getRootControl();
    const name = view.getViewName();
    if (name === 'sap.fe.templates.ObjectPage.ObjectPage') {
      return 'ObjectPage';
    }
    if (name === 'sap.fe.templates.ListReport.ListReport') {
      return 'ListReport';
    }
    return undefined;
  }

  /**
   * Get the containing page name of a control.
   *
   * @param control - UI5 control instance.
   * @returns Page name to which the control belongs.
   */
  function getPageName(control) {
    const component = Component.getOwnerComponentFor(control);
    if (!isA('sap.fe.core.TemplateComponent', component)) {
      return undefined;
    }
    const view = component.getRootControl();
    return view.getId().split('::').pop();
  }
  function getConfigMapControlIdMap(page, propertyPathSegments) {
    if (page && !propertyPathSegments.length) {
      return page;
    }
    if (page) {
      return `${page}-${propertyPathSegments.join('/')}`;
    }
    return propertyPathSegments.join('/');
  }
  var __exports = {
    __esModule: true
  };
  __exports.getAppComponent = getAppComponent;
  __exports.getReference = getReference;
  __exports.getV4PageType = getV4PageType;
  __exports.getPageName = getPageName;
  __exports.getConfigMapControlIdMap = getConfigMapControlIdMap;
  return __exports;
});
//# sourceMappingURL=fe-v4.js.map